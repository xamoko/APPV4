(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login-module"],{/***/"./node_modules/raw-loader/dist/cjs.js!./src/app/pages/login/login.page.html":/*!***********************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/login/login.page.html ***!
  \***********************************************************************************/ /*! exports provided: default */ /***/function node_modulesRawLoaderDistCjsJsSrcAppPagesLoginLoginPageHtml(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);/* harmony default export */__webpack_exports__["default"]="<!-- <ion-header>\n  <ion-toolbar>\n    <ion-title>login</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n</ion-content>\n -->\n\n <!-- <ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-title>Tabs + Side Menu</ion-title>\n  </ion-toolbar>\n</ion-header>\n \n<ion-content class=\"ion-padding\">\n\t\n  <ion-button expand=\"block\" routerLink=\"/menu/first/tab1\">Login</ion-button>\n</ion-content>   -->\n\n\t<ion-content  class=\"ion-padding gradient no-scroll\">\n\n<div class=\"spacer\" style=\"width: 100%; height: 30px;\"></div>\n\n<ion-card>\n\t<p style=\"text-align:center;\">\n\t\t\n\t\t<img src=\"assets/LogoSN_1010x178.png\" style=\"width: 60%; height: 60%;margin: auto;\" />\n\t</p>\n</ion-card>\n\n<div class=\"spacer\" style=\"width: 100%; height: 100px;\"></div>\n\n<ion-card class=\"center\">\n\t<ion-card-content>\n\t\t<ion-list style=\"margin-bottom:15px;\">\n\t\t\t<ion-item style=\"background-color: #fff0;\">\n\t\t\t\t<ion-icon class=\"icon-login\" item-left name=\"contact\"></ion-icon>\n\t\t\t\t<ion-label position=\"floating\">Usuario</ion-label>\n\t\t\t\t<ion-input type=\"text\" class=\"text-input\" [(ngModel)]=\"usuario\" name=\"usuario\"\n\t\t\t\t\t(ionChange)='onChangeUserValue()' (keypress)=\"eventHandler($event.keyCode, b)\"></ion-input>\n\t\t\t</ion-item>\n\t\t\t<ion-item style=\"background-color: #fff0;\">\n\t\t\t\t<ion-icon class=\"icon-login\" item-left name=\"lock\"></ion-icon>\n\t\t\t\t<ion-label position=\"floating\">Contrase\xF1a</ion-label>\n\t\t\t\t<ion-input [type]=\"passwordType\" class=\"text-input\" [(ngModel)]=\"password\" #b name=\"password\"\n\t\t\t\t\t(ionChange)='onChangePasswordValue()' (keypress)=\"eventHandlerPassword($event.keyCode)\">\n\t\t\t\t</ion-input>\n\t\t\t\t<ion-icon item-end [name]=\"passwordIcon\" class=\"password-icon\" (click)='hideShowPassword()'>\n\t\t\t\t</ion-icon>\n\t\t\t</ion-item>\n\t\t\t<div></div>\n\t\t</ion-list>\n\t\t<div style=\"margin-top: 40%;\" class=\"ion-padding\">\n\t\t\t<button id=\"btn-login\" ion-button block (click)=\"ingresar()\" class=\"btn-login\" disabled>Entrar</button>\n\t\t\t<p style=\"color:#000; text-align:center; margin-top:10px;\">\xBFOlvidaste tu contrase\xF1a?</p>\n\t\t</div>\n\t\t<ion-button expand=\"block\" routerLink=\"/menu/first/tab1\">Login</ion-button>\n\t</ion-card-content>\n</ion-card> \n\n\n</ion-content>";/***/},/***/"./src/app/pages/login/login.module.ts":/*!*********************************************!*\
  !*** ./src/app/pages/login/login.module.ts ***!
  \*********************************************/ /*! exports provided: LoginPageModule */ /***/function srcAppPagesLoginLoginModuleTs(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);/* harmony export (binding) */__webpack_require__.d(__webpack_exports__,"LoginPageModule",function(){return LoginPageModule});/* harmony import */var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(/*! tslib */"./node_modules/tslib/tslib.es6.js");/* harmony import */var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(/*! @angular/core */"./node_modules/@angular/core/fesm2015/core.js");/* harmony import */var _angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(/*! @angular/common */"./node_modules/@angular/common/fesm2015/common.js");/* harmony import */var _angular_forms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(/*! @angular/forms */"./node_modules/@angular/forms/fesm2015/forms.js");/* harmony import */var _angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(/*! @angular/router */"./node_modules/@angular/router/fesm2015/router.js");/* harmony import */var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(/*! @ionic/angular */"./node_modules/@ionic/angular/dist/fesm5.js");/* harmony import */var _login_page__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(/*! ./login.page */"./src/app/pages/login/login.page.ts");var routes=[{path:"",component:_login_page__WEBPACK_IMPORTED_MODULE_6__["LoginPage"]}];var LoginPageModule=function LoginPageModule(){};LoginPageModule=tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],_angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],_ionic_angular__WEBPACK_IMPORTED_MODULE_5__["IonicModule"],_angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"].forChild(routes)],declarations:[_login_page__WEBPACK_IMPORTED_MODULE_6__["LoginPage"]]})],LoginPageModule);/***/},/***/"./src/app/pages/login/login.page.ts":/*!*******************************************!*\
  !*** ./src/app/pages/login/login.page.ts ***!
  \*******************************************/ /*! exports provided: LoginPage */ /***/function srcAppPagesLoginLoginPageTs(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);/* harmony export (binding) */__webpack_require__.d(__webpack_exports__,"LoginPage",function(){return LoginPage});/* harmony import */var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(/*! tslib */"./node_modules/tslib/tslib.es6.js");/* harmony import */var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(/*! @angular/core */"./node_modules/@angular/core/fesm2015/core.js");/* harmony import */var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(/*! @ionic/angular */"./node_modules/@ionic/angular/dist/fesm5.js");/* harmony import */var _angular_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(/*! @angular/http */"./node_modules/@angular/http/fesm2015/http.js");/* harmony import */var _services_sqlite_sqlite__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(/*! ../../services/sqlite/sqlite */"./src/app/services/sqlite/sqlite.ts");/* harmony import */var _services_proveedorusers_proveedorusers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(/*! ../../services/proveedorusers/proveedorusers */"./src/app/services/proveedorusers/proveedorusers.ts");/* harmony import */var _angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(/*! @angular/router */"./node_modules/@angular/router/fesm2015/router.js");/* harmony import */var _api_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(/*! ../../../api.component */"./src/api.component.ts");//import { IonicPage } from 'ionic-angular';
/* const LCrypt = require('lcrypt');
const lcrypt = new LCrypt('TTQww2BVROs0PEU8Zc+1TE6NsKs0Y4PHesXnzyXYtRo='); */ //@IonicPage()
var LoginPage=/*#__PURE__*/function(){function LoginPage(alertController,http,navCtrl,sqliteService,proveedor,router){this.alertController=alertController;this.http=http;this.navCtrl=navCtrl;this.sqliteService=sqliteService;this.proveedor=proveedor;this.router=router;this.passwordType="password";this.passwordIcon="eye-off"}var _proto=LoginPage.prototype;_proto.ngOnInit=function ngOnInit(){};_proto.login=function login(){var url=_api_component__WEBPACK_IMPORTED_MODULE_7__["enlace"]+"/loginApp";return url};_proto.hideShowPassword=function hideShowPassword(){this.passwordType=this.passwordType==="text"?"password":"text";this.passwordIcon=this.passwordIcon==="eye-off"?"eye":"eye-off"};_proto.onChangeUserValue=function onChangeUserValue(){var userAux=this.usuario;var passwordAux=this.password;var element=document.getElementById("btn-login");if(userAux!=undefined&&userAux!=""&&passwordAux!=undefined&&passwordAux!=""){element.disabled=false}else{element.disabled=true}};_proto.onChangePasswordValue=function onChangePasswordValue(){var userAux=this.usuario;var passwordAux=this.password;var element=document.getElementById("btn-login");if(userAux!=undefined&&userAux!=""&&passwordAux!=undefined&&passwordAux!=""){element.disabled=false}else{element.disabled=true}};_proto.eventHandler=function eventHandler(keyCode,nextElement){var userAux=this.usuario;if(keyCode==13&&userAux!=undefined&&userAux!="")nextElement.setFocus()};_proto.eventHandlerPassword=function eventHandlerPassword(keyCode,nextElement){var userAux=this.usuario;var passwordAux=this.password;if(keyCode==13&&userAux!=undefined&&userAux!=""&&passwordAux!=undefined&&passwordAux!="")this.ingresar()};_proto.ingresar=function ingresar(){return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){var _this=this;var url,data;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=_api_component__WEBPACK_IMPORTED_MODULE_7__["enlace"]+"loginApp";/* let headers2 = new Headers();
            headers2.append('Content-Type', 'application/json');
            headers2.append('Access-Control-Allow-Origin', '*');
            headers2.append('Access-Control-Allow-Methods', 'POST, GET, OPTIONS, PUT');
            headers2.append('Content-Type', 'application/x-www-form-urlencoded'); */data={user:this.usuario,password:this.password};/* let crypt ={
                user: lcrypt.encode(data.user),
                password: lcrypt.encode(data.password)
            };  */console.log("Inicio de Login... "+data.user,data.password);//console.log("Inicio de Login... " + crypt.user, crypt.password);
console.log("url: "+url);this.http.post(url,JSON.stringify(data),{headers:_api_component__WEBPACK_IMPORTED_MODULE_7__["headers2"]}).subscribe(function(crypt){return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var alert3,alert2,alert1,alert4,alert5;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.resToken=crypt.json();this.sqliteService.token=this.resToken.token;this.sqliteService.UserId=this.resToken.id;this.sqliteService.entitiesId=this.resToken.entities_id;this.start_valid_date=this.resToken.start_valid_date;this.end_valid_date=this.resToken.end_valid_date;this.last_change_user_id=this.resToken.last_change_user_id;this.date=this.resToken.date;this.entities=this.resToken.entities;this.entities_id=this.resToken.entities_id;this.error=this.resToken.error;this.user_type_id=this.resToken.user_type_id;console.log("Token: "+this.resToken.token);console.log("Id: "+this.resToken.id);console.log("start_valid_date: "+this.resToken.start_valid_date);console.log("end_valid_date: "+this.resToken.end_valid_date);console.log("last_change_user_id: "+this.resToken.last_change_user_id);console.log("entities_id: "+this.resToken.entities_id);console.log("error: "+this.resToken.error);console.log("status: "+this.resToken.status);console.log("user_type_id: "+this.user_type_id);if(!(this.error==4)){_context.next=29;break}_context.next=24;return this.alertController.create({header:"Alert",subHeader:"Subtitle",buttons:["OK"]});case 24:alert3=_context.sent;_context.next=27;return alert3.present();case 27:_context.next=63;break;case 29:if(!(this.error==5)){_context.next=37;break}_context.next=32;return this.alertController.create({header:"Login",subHeader:"El usuario ha caducado",buttons:["Ok"]});case 32:alert2=_context.sent;_context.next=35;return alert2.present();case 35:_context.next=63;break;case 37:if(!(this.error=="invalid_credentials")){_context.next=45;break}_context.next=40;return this.alertController.create({header:"Login",subHeader:"Credenciales Inv\xE1lidas",buttons:["Ok"]});case 40:alert1=_context.sent;_context.next=43;return alert1.present();case 43:_context.next=63;break;case 45:if(!(this.user_type_id=="2"||this.user_type_id=="1,2")){_context.next=58;break}if(!(this.resToken.status==="succes")){_context.next=51;break}this.router.navigate(["/menu/first/tab1"]);console.log("succes");_context.next=56;break;case 51:_context.next=53;return this.alertController.create({header:"Login",subHeader:"No autorizado",buttons:["Ok"]});case 53:alert4=_context.sent;_context.next=56;return alert4.present();case 56:_context.next=63;break;case 58:_context.next=60;return this.alertController.create({header:"Login",subHeader:"No tiene acceso a la aplicaci\xF3n",buttons:["Ok"]});case 60:alert5=_context.sent;_context.next=63;return alert5.present();case 63:case"end":return _context.stop();}}},_callee,this)}))});case 5:case"end":return _context2.stop();}}},_callee2,this)}))};return LoginPage}();LoginPage.ctorParameters=function(){return[{type:_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"]},{type:_angular_http__WEBPACK_IMPORTED_MODULE_3__["Http"]},{type:_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["NavController"]},{type:_services_sqlite_sqlite__WEBPACK_IMPORTED_MODULE_4__["SqliteProvider"]},{type:_services_proveedorusers_proveedorusers__WEBPACK_IMPORTED_MODULE_5__["ProveedorusersProvider"]},{type:_angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"]}]};tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])("password",{static:true}),tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type",Object)],LoginPage.prototype,"passwordInput",void 0);LoginPage=tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({selector:"app-login",template:tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./login.page.html */"./node_modules/raw-loader/dist/cjs.js!./src/app/pages/login/login.page.html")).default}),tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes",[_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"],_angular_http__WEBPACK_IMPORTED_MODULE_3__["Http"],_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["NavController"],_services_sqlite_sqlite__WEBPACK_IMPORTED_MODULE_4__["SqliteProvider"],_services_proveedorusers_proveedorusers__WEBPACK_IMPORTED_MODULE_5__["ProveedorusersProvider"],_angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"]])],LoginPage);/***/}}]);//# sourceMappingURL=pages-login-login-module-es2015.js.map
//# sourceMappingURL=pages-login-login-module-es5.js.map